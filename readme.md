# Document Remote MCP

**注意**: このドキュメントはAIによって作成されています。

**Cautious**: This document is generated by AI.

開発プロセスの各工程に応じたドキュメントをMCP (Model Context Prot１ocol) 経由でリモート取得するためのサーバーです。AI開発支援において、適切なドキュメントを段階的に提供し、ユーザーには成果物のみを表示する仕組みを提供します。

## 🎯 概要

このシステムは、開発の各工程（設計・開発・テスト）に応じて必要なドキュメントを自動的に取得し、AIの推論に活用します。重要な点として、**ドキュメントの内容はユーザーに直接表示せず、AIの内部処理でのみ使用**することで、適切なガイダンスを提供しながらユーザーエクスペリエンスを保護します。

## 🚀 クイックスタート

### 前提条件
- Node.js (v21.7.3以上推奨)
- npm

### インストール・起動
```bash
# 依存関係のインストール
npm install

# 開発サーバー起動（ポート8080）
npm run dev
```

### MCPサーバー接続
サーバーが起動すると、以下のエンドポイントでMCPサーバーにアクセスできます：
```
http://localhost:8080/mcp
```

## 🐳 Docker での使用方法

### Docker Compose を使用した簡単起動

#### 前提条件
- Docker
- Docker Compose

#### 基本的な起動手順

```bash
# 1. リポジトリをクローン
git clone <repository-url>
cd document-remote-mcp

# 2. ドキュメントを development-guidelines/ に配置

# 3. Docker Compose で起動
docker-compose up -d

# 4. 動作確認
curl http://localhost:8080/mcp
```

#### アクセス方法
- **ローカル**: `http://localhost:8080/mcp`
- **リモート**: `http://<HOST_IP>:8080/mcp`

### Docker運用の利点
- 環境の一貫性（Node.js、依存関係が自動管理）
- ワンコマンドでの起動・停止
- セキュアな分離環境
- 簡単な配布とインストール

詳細な Docker 運用方法は [DOCKER.md](./DOCKER.md) を参照してください。

## 📋 提供機能

### MCPツール

#### 1. `get_phase_documents`
指定された工程の全ドキュメントを取得
```json
{
  "phase": "design" | "development" | "test"
}
```

#### 2. `get_document_content`  
特定のドキュメント内容を取得
```json
{
  "phase": "design" | "development" | "test",
  "fileName": "example.md",
  "directory": "design-rules" // オプション
}
```

#### 3. `list_available_phases`
利用可能な工程一覧を取得

### 工程別ドキュメント構成

| 工程       | 取得されるドキュメント                              |
| ---------- | --------------------------------------------------- |
| **設計**   | 一般ルール + 設計ルール                             |
| **開発**   | 一般ルール + 設計ルール + 開発ルール                |
| **テスト** | 一般ルール + 設計ルール + 開発ルール + テストルール |

## 📁 ディレクトリ構造

```
development-guidelines/
├── rulus.md                    # 一般ルール（全工程で必須）
├── design-rules/               # 設計ルール
│   └── design_rules.md
├── development-rules/          # 開発ルール  
│   └── dev_rules.md
└── test-rules/                 # テストルール
    └── unit_test_rules.md
```

## 🛠️ 開発

### 利用可能なコマンド

```bash
# 開発サーバー起動（ホットリロード）
npm run dev

# ファイル監視モード
npm run watch

# プロダクションビルド
npm run build

# ビルド済みアプリケーション実行
npm start

# テスト実行
npm test

# テスト監視モード
npm run test:watch

# テストカバレッジ取得
npm run test:coverage
```

### アーキテクチャ

- **MCP Server**: FastMCPフレームワークによるHTTP Streamサーバー
- **Document Retrieval Service**: ファイルシステムからの段階的ドキュメント読み込み
- **Type-Safe Configuration**: TypeScriptによる型安全な工程設定

### テストについて

テストは独立した環境で実行されるため、実際のドキュメントファイルの追加・変更・削除がテスト結果に影響することはありません。

## ⚠️ 重要な注意事項

### セキュリティポリシー
- **ドキュメント内容の非開示**: `rulus.md`で定義された通り、取得したドキュメント内容はAIの推論にのみ使用し、ユーザーには表示しません
- **成果物中心のアプローチ**: ユーザーには最終的な成果物のみを提供

### ドキュメント管理
- 新しいドキュメントは適切なディレクトリ（`design-rules/`, `development-rules/`, `test-rules/`）に配置
- サポートされるファイル形式: `.md`, `.txt`, `.rst`, `.adoc`, `.tex`
- `rulus.md`は全工程で自動的に含まれる最重要ルール